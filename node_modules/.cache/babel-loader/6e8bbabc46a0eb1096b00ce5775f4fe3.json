{"ast":null,"code":"var _jsxFileName = \"/Users/crocslut/Documents/Git/aia/aia-assessment-nodejs-fe/src/component/EmployeeTable.jsx\";\nimport React, { Component } from \"react\";\nimport \"./EmployeeTable.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus, faTrash, faEdit, faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\nimport { RingLoader } from \"react-spinners\";\nimport { css } from \"@emotion/core\";\nimport { Button } from \"react-bootstrap\";\nimport { AgGridReact } from \"ag-grid-react\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport \"ag-grid-community/dist/styles/ag-theme-balham.css\";\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  margin-top: 45px;\n  border-color: red;\n`;\n\nclass AdminEmployeeTable extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      employeeData: [],\n      loading: true,\n      columnDefs: [{\n        headerName: \"Employee Code\",\n        field: \"EmployeeCode\",\n        sortable: true,\n        width: 140 // filter: true ,\n\n      }, {\n        headerName: \"Email\",\n        field: \"Email\",\n        sortable: true,\n        // filter: true ,\n        width: 150\n      }, {\n        headerName: \"Account Access\",\n        field: \"Account\",\n        sortable: true // width: 70,\n        // filter: true ,\n\n      }, {\n        headerName: \"First Name\",\n        field: \"FirstName\",\n        sortable: true,\n        width: 110 // filter: true ,\n\n      }, {\n        headerName: \"Middle Name\",\n        field: \"MiddleName\",\n        sortable: true,\n        width: 130 // filter: true ,\n\n      }, {\n        headerName: \"Last Name\",\n        field: \"LastName\",\n        sortable: true,\n        width: 110 // filter: true ,\n\n      }, {\n        headerName: \"DOB\",\n        field: \"DOB\",\n        sortable: true,\n        filter: true,\n        type: [\"dateColumn\"],\n        filter: \"agDateColumnFilter\"\n      }, {\n        headerName: \"ContactNo\",\n        field: \"ContactNo\",\n        sortable: true,\n        width: 117 // filter: true ,\n\n      }, {\n        headerName: \"Role\",\n        field: \"RoleName\",\n        sortable: true,\n        width: 70 // filter: true ,\n\n      }, {\n        headerName: \"Position Name\",\n        field: \"PositionName\",\n        sortable: true,\n        width: 120 // filter: true ,\n\n      }, {\n        headerName: \"Department Name\",\n        field: \"DepartmentName\",\n        sortable: true,\n        width: 120 // filter: true ,\n\n      }, {\n        headerName: \"Date Of Joining\",\n        field: \"DateOfJoining\",\n        sortable: true,\n        width: 120 // filter: true ,\n\n      }, {\n        headerName: \"\",\n        field: \"info\",\n        filter: false,\n        width: 30,\n        // cellRenderer:this.ageCellRendererFunc,\n        // cellRendererFramework: function(params) {\n        //   return <button OnClick={console.log(\"pa\",params)}>Test</button>;\n        // },\n        cellRendererFramework: this.renderInfoButton.bind(this)\n      }, {\n        headerName: \"\",\n        field: \"edit\",\n        filter: false,\n        width: 30,\n        // cellRenderer:this.ageCellRendererFunc,\n        // cellRendererFramework: function(params) {\n        //   return <button OnClick={console.log(\"pa\",params)}>Test</button>;\n        // },\n        cellRendererFramework: this.renderEditButton.bind(this)\n      }, {\n        headerName: \"\",\n        field: \"delete\",\n        filter: false,\n        width: 30,\n        // cellRenderer:this.ageCellRendererFunc,\n        // cellRendererFramework: function(params) {\n        //   return <button OnClick={console.log(\"pa\",params)}>Test</button>;\n        // },\n        cellRendererFramework: this.renderButton.bind(this)\n      }],\n      rowData: [],\n      defaultColDef: {\n        resizable: true,\n        width: 100,\n        filter: \"agTextColumnFilter\" // filter: true ,\n\n      },\n      getRowHeight: function (params) {\n        return 35;\n      }\n    };\n    this.employeeObj = [];\n    this.rowDataT = [];\n\n    this.loadEmployeeData = () => {\n      axios.get(process.env.REACT_APP_API_URL + \"/api/employee\", {\n        headers: {\n          authorization: localStorage.getItem(\"token\") || \"\"\n        }\n      }).then(response => {\n        this.employeeObj = response.data;\n        console.log(\"response\", response.data);\n        this.setState({\n          employeeData: response.data\n        });\n        this.setState({\n          loading: false\n        });\n        this.rowDataT = [];\n        this.employeeObj.map(data => {\n          let temp = {\n            data,\n            Email: data[\"Email\"],\n            Password: data[\"Password\"],\n            Account: data[\"Account\"] == 1 ? \"Admin\" : data[\"Account\"] == 2 ? \"HR\" : data[\"Account\"] == 3 ? \"Employee\" : \"\",\n            RoleName: data[\"role\"][0][\"RoleName\"],\n            FirstName: data[\"FirstName\"],\n            MiddleName: data[\"MiddleName\"],\n            LastName: data[\"LastName\"],\n            DOB: data[\"DOB\"].slice(0, 10),\n            ContactNo: data[\"ContactNo\"],\n            EmployeeCode: data[\"EmployeeCode\"],\n            DepartmentName: data[\"department\"][0][\"DepartmentName\"],\n            PositionName: data[\"position\"][0][\"PositionName\"],\n            DateOfJoining: data[\"DateOfJoining\"].slice(0, 10)\n          };\n          this.rowDataT.push(temp);\n        });\n        this.setState({\n          rowData: this.rowDataT\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.onEmployeeDelete = e => {\n      console.log(e);\n\n      if (window.confirm(\"Are you sure to delete this record? \") == true) {\n        window.alert(\"You are not allowed to perform this operation\"); // axios\n        //   .delete(process.env.REACT_APP_API_URL + \"/api/employee/\" + e, {\n        //     headers: {\n        //       authorization: localStorage.getItem(\"token\") || \"\"\n        //     }\n        //   })\n        //   .then(res => {\n        //     this.componentDidMount();\n        //   })\n        //   .catch(err => {\n        //     console.log(err);\n        //   });\n      }\n    };\n\n    this.handleClick = e => {\n      console.log(e);\n    };\n\n    this.searchChange = e => {\n      console.log(e.target.value);\n      this.setState({\n        searchData: e.target.value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.loadEmployeeData();\n  }\n\n  renderInfoButton(params) {\n    console.log(params);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faInfoCircle,\n      onClick: () => this.props.onEmpInfo(params.data.data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  renderButton(params) {\n    console.log(params);\n    return /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faTrash,\n      onClick: () => this.onEmployeeDelete(params.data.data[\"_id\"]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 12\n      }\n    });\n  }\n\n  renderEditButton(params) {\n    console.log(params);\n    return /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faEdit,\n      onClick: () => this.props.onEditEmployee(params.data.data),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 12\n      }\n    });\n  }\n\n  // getFilteredEmp() {\n  //   return this.employeeObj.filter(emp => {\n  //     return (\n  //       emp[\"Email\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"role\"][0][\"RoleName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"FirstName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"MiddleName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"LastName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"DOB\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"ContactNo\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"EmployeeCode\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"department\"][0][\"DepartmentName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"position\"][0][\"PositionName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"DateOfJoining\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase())\n  //     );\n  //   });\n  // }\n  render() {\n    // let filteredEmp = this.getFilteredEmp();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"table-outer-div-scroll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      id: \"role-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }\n    }, \"Employee Details\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      id: \"add-button\",\n      onClick: this.props.onAddEmployee,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPlus,\n      id: \"plus-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 11\n      }\n    }), \"Add\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"clear-both\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }\n    }), !this.state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"table-div\",\n      className: \"ag-theme-balham\" //   style={\n      //     {\n      //     height: \"500px\",\n      //     width: \"100%\"\n      //   }\n      // }\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(AgGridReact, {\n      columnDefs: this.state.columnDefs,\n      defaultColDef: this.state.defaultColDef,\n      columnTypes: this.state.columnTypes,\n      rowData: this.state.rowData // floatingFilter={true}\n      // onGridReady={this.onGridReady}\n      ,\n      pagination: true,\n      paginationPageSize: 10,\n      getRowHeight: this.state.getRowHeight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"loading-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(RingLoader, {\n      css: override,\n      sizeUnit: \"px\",\n      size: 50,\n      color: \"#0000ff\",\n      loading: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 15\n      }\n    })));\n  }\n\n}\n\nexport default AdminEmployeeTable;","map":{"version":3,"sources":["/Users/crocslut/Documents/Git/aia/aia-assessment-nodejs-fe/src/component/EmployeeTable.jsx"],"names":["React","Component","axios","FontAwesomeIcon","faPlus","faTrash","faEdit","faInfoCircle","RingLoader","css","Button","AgGridReact","override","AdminEmployeeTable","state","employeeData","loading","columnDefs","headerName","field","sortable","width","filter","type","cellRendererFramework","renderInfoButton","bind","renderEditButton","renderButton","rowData","defaultColDef","resizable","getRowHeight","params","employeeObj","rowDataT","loadEmployeeData","get","process","env","REACT_APP_API_URL","headers","authorization","localStorage","getItem","then","response","data","console","log","setState","map","temp","Email","Password","Account","RoleName","FirstName","MiddleName","LastName","DOB","slice","ContactNo","EmployeeCode","DepartmentName","PositionName","DateOfJoining","push","catch","error","onEmployeeDelete","e","window","confirm","alert","handleClick","searchChange","target","value","searchData","componentDidMount","props","onEmpInfo","onEditEmployee","render","onAddEmployee","columnTypes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./EmployeeTable.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faPlus,\n  faTrash,\n  faEdit,\n  faInfoCircle\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { RingLoader } from \"react-spinners\";\nimport { css } from \"@emotion/core\";\nimport { Button } from \"react-bootstrap\";\n\nimport { AgGridReact } from \"ag-grid-react\";\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\nimport \"ag-grid-community/dist/styles/ag-theme-balham.css\";\n\n\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  margin-top: 45px;\n  border-color: red;\n`;\n\n\nclass AdminEmployeeTable extends Component {\n  state = {\n    employeeData: [],\n    loading: true,\n\n    columnDefs: [\n      {\n        headerName: \"Employee Code\",\n        field: \"EmployeeCode\",\n        sortable: true,\n        width: 140,\n        // filter: true ,\n      },\n      {\n        headerName: \"Email\",\n        field: \"Email\",\n        sortable: true,\n        // filter: true ,\n        width: 150,\n      },\n      {\n        headerName: \"Account Access\",\n        field: \"Account\",\n        sortable: true,\n\n        // width: 70,\n        // filter: true ,\n      },\n      {\n        headerName: \"First Name\",\n        field: \"FirstName\",\n        sortable: true,\n        width: 110,\n\n        // filter: true ,\n      },\n      {\n        headerName: \"Middle Name\",\n        field: \"MiddleName\",\n        sortable: true,\n        width: 130,\n\n        // filter: true ,\n      },\n      {\n        headerName: \"Last Name\",\n        field: \"LastName\",\n        sortable: true,\n        width: 110,\n\n        // filter: true ,\n      },\n      {\n        headerName: \"DOB\",\n        field: \"DOB\",\n        sortable: true,\n        filter: true,\n        type: [\"dateColumn\"],\n        filter: \"agDateColumnFilter\"\n      },\n      {\n        headerName: \"ContactNo\",\n        field: \"ContactNo\",\n        sortable: true,\n        width: 117,\n        // filter: true ,\n      },\n\n      {\n        headerName: \"Role\",\n        field: \"RoleName\",\n        sortable: true,\n\n        width: 70,\n        // filter: true ,\n      },\n      {\n        headerName: \"Position Name\",\n        field: \"PositionName\",\n        sortable: true,\n        width: 120,\n\n        // filter: true ,\n      },\n      {\n        headerName: \"Department Name\",\n        field: \"DepartmentName\",\n        sortable: true\n        ,\n        width: 120,\n        // filter: true ,\n      },\n\n\n\n      {\n        headerName: \"Date Of Joining\",\n        field: \"DateOfJoining\",\n        sortable: true\n        ,\n        width: 120,\n        // filter: true ,\n\n      },\n      {\n        headerName: \"\",\n        field: \"info\",\n        filter: false,\n        width: 30,\n        // cellRenderer:this.ageCellRendererFunc,\n        // cellRendererFramework: function(params) {\n        //   return <button OnClick={console.log(\"pa\",params)}>Test</button>;\n        // },\n        cellRendererFramework: this.renderInfoButton.bind(this),\n\n\n      },\n      {\n        headerName: \"\",\n        field: \"edit\",\n        filter: false,\n        width: 30,\n        // cellRenderer:this.ageCellRendererFunc,\n        // cellRendererFramework: function(params) {\n        //   return <button OnClick={console.log(\"pa\",params)}>Test</button>;\n        // },\n        cellRendererFramework: this.renderEditButton.bind(this),\n\n\n      },\n      {\n        headerName: \"\",\n        field: \"delete\",\n        filter: false,\n        width: 30,\n        // cellRenderer:this.ageCellRendererFunc,\n        // cellRendererFramework: function(params) {\n        //   return <button OnClick={console.log(\"pa\",params)}>Test</button>;\n        // },\n        cellRendererFramework: this.renderButton.bind(this),\n\n\n      },\n\n    ],\n    rowData: [],\n    defaultColDef: {\n      resizable: true,\n      width: 100,\n      filter: \"agTextColumnFilter\"\n      // filter: true ,\n    },\n    getRowHeight: function (params) {\n      return 35;\n    }\n  };\n  employeeObj = [];\n  rowDataT = [];\n\n  loadEmployeeData = () => {\n    axios\n      .get(process.env.REACT_APP_API_URL + \"/api/employee\", {\n        headers: {\n          authorization: localStorage.getItem(\"token\") || \"\"\n        }\n      })\n      .then(response => {\n        this.employeeObj = response.data;\n        console.log(\"response\", response.data);\n        this.setState({ employeeData: response.data });\n        this.setState({ loading: false });\n        this.rowDataT = [];\n        this.employeeObj.map(data => {\n          let temp = {\n            data,\n            Email: data[\"Email\"],\n            Password: data[\"Password\"],\n            Account: data[\"Account\"] == 1 ? \"Admin\" : (data[\"Account\"] == 2 ? \"HR\" : (data[\"Account\"] == 3 ? \"Employee\" : \"\")),\n            RoleName: data[\"role\"][0][\"RoleName\"],\n            FirstName: data[\"FirstName\"],\n            MiddleName: data[\"MiddleName\"],\n            LastName: data[\"LastName\"],\n            DOB: data[\"DOB\"].slice(0, 10),\n            ContactNo: data[\"ContactNo\"],\n            EmployeeCode: data[\"EmployeeCode\"],\n            DepartmentName: data[\"department\"][0][\"DepartmentName\"],\n            PositionName: data[\"position\"][0][\"PositionName\"],\n            DateOfJoining: data[\"DateOfJoining\"].slice(0, 10)\n          };\n\n          this.rowDataT.push(temp);\n        });\n        this.setState({ rowData: this.rowDataT });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  onEmployeeDelete = e => {\n    console.log(e);\n    if (window.confirm(\"Are you sure to delete this record? \") == true) {\n      window.alert(\"You are not allowed to perform this operation\");\n      // axios\n      //   .delete(process.env.REACT_APP_API_URL + \"/api/employee/\" + e, {\n      //     headers: {\n      //       authorization: localStorage.getItem(\"token\") || \"\"\n      //     }\n      //   })\n      //   .then(res => {\n      //     this.componentDidMount();\n      //   })\n      //   .catch(err => {\n      //     console.log(err);\n      //   });\n    }\n  };\n  componentDidMount() {\n    this.loadEmployeeData();\n  }\n  handleClick = (e) => {\n    console.log(e);\n  }\n  renderInfoButton(params) {\n    console.log(params);\n    return <div>\n      <FontAwesomeIcon\n        icon={faInfoCircle}\n        onClick={() => this.props.onEmpInfo(params.data.data)}\n      /></div>;\n  }\n  renderButton(params) {\n    console.log(params);\n    return <FontAwesomeIcon\n      icon={faTrash}\n      onClick={() => this.onEmployeeDelete(params.data.data[\"_id\"])}\n    />;\n  }\n  renderEditButton(params) {\n    console.log(params);\n    return <FontAwesomeIcon\n      icon={faEdit}\n      onClick={() => this.props.onEditEmployee(params.data.data)}\n    />;\n  }\n\n  searchChange = e => {\n    console.log(e.target.value);\n    this.setState({ searchData: e.target.value });\n  };\n  // getFilteredEmp() {\n  //   return this.employeeObj.filter(emp => {\n  //     return (\n  //       emp[\"Email\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"role\"][0][\"RoleName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"FirstName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"MiddleName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"LastName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"DOB\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"ContactNo\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"EmployeeCode\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"department\"][0][\"DepartmentName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"position\"][0][\"PositionName\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase()) ||\n  //       emp[\"DateOfJoining\"]\n  //         .toLowerCase()\n  //         .includes(this.state.searchData.toLocaleLowerCase())\n  //     );\n  //   });\n  // }\n\n  render() {\n    // let filteredEmp = this.getFilteredEmp();\n    return (\n      <div id=\"table-outer-div-scroll\">\n        <h2 id=\"role-title\">Employee Details</h2>\n\n        <Button\n          variant=\"primary\"\n          id=\"add-button\"\n          onClick={this.props.onAddEmployee}\n        >\n          <FontAwesomeIcon icon={faPlus} id=\"plus-icon\" />\n          Add\n        </Button>\n\n        <div id=\"clear-both\" />\n        {!this.state.loading ? (\n          <div\n            id=\"table-div\"\n            className=\"ag-theme-balham\"\n          //   style={\n          //     {\n          //     height: \"500px\",\n          //     width: \"100%\"\n          //   }\n          // }\n          >\n            <AgGridReact\n              columnDefs={this.state.columnDefs}\n              defaultColDef={this.state.defaultColDef}\n              columnTypes={this.state.columnTypes}\n              rowData={this.state.rowData}\n              // floatingFilter={true}\n              // onGridReady={this.onGridReady}\n              pagination={true}\n              paginationPageSize={10}\n              getRowHeight={this.state.getRowHeight}\n            />\n          </div>\n        ) : (\n            <div id=\"loading-bar\">\n              <RingLoader\n                css={override}\n                sizeUnit={\"px\"}\n                size={50}\n                color={\"#0000ff\"}\n                loading={true}\n              />\n            </div>\n          )}\n\n      </div>\n    );\n  }\n}\n\nexport default AdminEmployeeTable;\n"]},"metadata":{},"sourceType":"module"}